(function(a){function y(b,l,c){var e=this;return this.on("click.pjax",b,function(b){var d=a.extend({},q(l,c));d.container||(d.container=a(this).attr("data-pjax")||e);h(b,d)})}function h(b,l,c){c=q(l,c);l=b.currentTarget;if("A"!==l.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||location.protocol!==l.protocol||location.hostname!==l.hostname||l.hash&&l.href.replace(l.hash,"")===location.href.replace(location.hash,
"")||l.href===location.href+"#")){var e={url:l.href,container:a(l).attr("data-pjax"),target:l};c=a.extend({},e,c);e=a.Event("pjax:click");a(l).trigger(e,[c]);e.isDefaultPrevented()||(g(c),b.preventDefault(),a(l).trigger("pjax:clicked",[c]))}}function v(b,c,e){e=q(c,e);c=b.currentTarget;if("FORM"!==c.tagName.toUpperCase())throw"$.pjax.submit requires a form element";c={type:c.method.toUpperCase(),url:c.action,data:a(c).serializeArray(),container:a(c).attr("data-pjax"),target:c};g(a.extend({},c,e));
b.preventDefault()}function g(b){function c(b,e){var l=a.Event(b,{relatedTarget:m});d.trigger(l,e);return!l.isDefaultPrevented()}b=a.extend(!0,{},a.ajaxSettings,g.defaults,b);a.isFunction(b.url)&&(b.url=b.url());var m=b.target,n=z(b.url).hash,d=b.context=G(b.container);b.data||(b.data={});b.data._pjax=d.selector;var f;b.beforeSend=function(a,e){"GET"!==e.type&&(e.timeout=0);a.setRequestHeader("X-PJAX","true");a.setRequestHeader("X-PJAX-Container",d.selector);if(!c("pjax:beforeSend",[a,e]))return!1;
0<e.timeout&&(f=setTimeout(function(){c("pjax:timeout",[a,b])&&a.abort("timeout")},e.timeout),e.timeout=0);b.requestUrl=z(e.url).href};b.complete=function(a,e){f&&clearTimeout(f);c("pjax:complete",[a,e,b]);c("pjax:end",[a,b])};b.error=function(a,e,d){var n=E("",a,b);a=c("pjax:error",[a,e,d,b]);"GET"==b.type&&("abort"!==e&&a)&&D(n.url)};b.success=function(e,m,k){var f="function"===typeof a.pjax.defaults.version?a.pjax.defaults.version():a.pjax.defaults.version,w=k.getResponseHeader("X-PJAX-Version"),
x=E(e,k,b);if(f&&w&&f!==w)D(x.url);else if(x.contents){g.state={id:b.id||(new Date).getTime(),url:x.url,title:x.title,container:d.selector,fragment:b.fragment,timeout:b.timeout};(b.push||b.replace)&&window.history.replaceState(g.state,x.title,x.url);try{document.activeElement.blur()}catch(K){}x.title&&(document.title=x.title);d.html(x.contents);(f=d.find("input[autofocus], textarea[autofocus]").last()[0])&&document.activeElement!==f&&f.focus();J(x.scripts);"number"===typeof b.scrollTo&&a(window).scrollTop(b.scrollTo);
""!==n&&(f=z(x.url),f.hash=n,g.state.url=f.href,window.history.replaceState(g.state,x.title,f.href),x=a(f.hash),x.length&&a(window).scrollTop(x.offset().top));c("pjax:success",[e,m,k,b])}else D(x.url)};g.state||(g.state={id:(new Date).getTime(),url:window.location.href,title:document.title,container:d.selector,fragment:b.fragment,timeout:b.timeout},window.history.replaceState(g.state,document.title));var k=g.xhr;k&&4>k.readyState&&(k.onreadystatechange=a.noop,k.abort());g.options=b;k=g.xhr=a.ajax(b);
0<k.readyState&&(b.push&&!b.replace&&(e(g.state.id,d.clone().contents()),window.history.pushState(null,"",F(b.requestUrl))),c("pjax:start",[k,b]),c("pjax:send",[k,b]));return g.xhr}function A(b,c){return g(a.extend({url:window.location.href,push:!1,replace:!0,scrollTo:!1},q(b,c)))}function D(a){window.history.replaceState(null,"","#");window.location.replace(a)}function H(b){if((b=b.state)&&b.container){if(c&&K==b.url||g.state&&g.state.id===b.id)return;var e=a(b.container);if(e.length){var d,f=u[b.id];
if(g.state){var k=d=g.state.id<b.id?"forward":"back",B=g.state.id,h=e.clone().contents();u[B]=h;"forward"===k?(k=r,h=s):(k=s,h=r);k.push(B);(B=h.pop())&&delete u[B]}d=a.Event("pjax:popstate",{state:b,direction:d});e.trigger(d);d={id:b.id,url:b.url,container:e,push:!1,fragment:b.fragment,timeout:b.timeout,scrollTo:!1};f?(e.trigger("pjax:start",[null,d]),b.title&&(document.title=b.title),e.html(f),g.state=b,e.trigger("pjax:end",[null,d])):g(d);e[0].offsetHeight}else D(location.href)}c=!1}function I(b){var c=
a.isFunction(b.url)?b.url():b.url,e=b.type?b.type.toUpperCase():"GET",d=a("<form>",{method:"GET"===e?"GET":"POST",action:c,style:"display:none"});"GET"!==e&&"POST"!==e&&d.append(a("<input>",{type:"hidden",name:"_method",value:e.toLowerCase()}));b=b.data;if("string"===typeof b)a.each(b.split("&"),function(b,c){var e=c.split("=");d.append(a("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if("object"===typeof b)for(key in b)d.append(a("<input>",{type:"hidden",name:key,value:b[key]}));a(document.body).append(d);
d.submit()}function F(a){return a.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function z(a){var c=document.createElement("a");c.href=a;return c}function q(b,c){b&&c?c.container=b:c=a.isPlainObject(b)?b:{container:b};c.container&&(c.container=G(c.container));return c}function G(b){b=a(b);if(b.length){if(""!==b.selector&&b.context===document)return b;if(b.attr("id"))return a("#"+b.attr("id"));throw"cant get selector for pjax container!";}throw"no pjax container for "+
b.selector;}function C(b){return a.parseHTML(b,document,!0)}function E(b,c,e){var d={};d.url=F(c.getResponseHeader("X-PJAX-URL")||e.requestUrl);if(/<html/i.test(b)){c=a(C(b.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0]));var f=a(C(b.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))}else c=f=a(C(b));if(0===f.length)return d;d.title=c.filter("title").add(c.find("title")).last().text();e.fragment?(b="body"===e.fragment?f:f.filter(e.fragment).add(f.find(e.fragment)).first(),b.length&&(d.contents=b.contents(),
d.title||(d.title=b.attr("title")||b.data("title")))):/<html/i.test(b)||(d.contents=f);d.contents&&(d.contents=d.contents.not(function(){return a(this).is("title")}),d.contents.find("title").remove(),d.scripts=d.contents.filter("script[src]").add(d.contents.find("script[src]")).remove(),d.contents=d.contents.not(d.scripts));d.title&&(d.title=a.trim(d.title));return d}function J(b){if(b){var c=a("script[src]");b.each(function(){var b=this.src;if(!c.filter(function(){return this.src===b}).length){var e=
document.createElement("script");e.type=a(this).attr("type");e.src=a(this).attr("src");document.head.appendChild(e)}})}}function e(a,c){u[a]=c;for(r.push(a);s.length;)delete u[s.shift()];for(;r.length>g.defaults.maxCacheLength;)delete u[r.shift()]}function d(){return a("meta").filter(function(){var b=a(this).attr("http-equiv");return b&&"X-PJAX-VERSION"===b.toUpperCase()}).attr("content")}function k(){a.fn.pjax=y;a.pjax=g;a.pjax.enable=a.noop;a.pjax.disable=f;a.pjax.click=h;a.pjax.submit=v;a.pjax.reload=
A;a.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:d};a(window).on("popstate.pjax",H)}function f(){a.fn.pjax=function(){return this};a.pjax=I;a.pjax.enable=k;a.pjax.disable=a.noop;a.pjax.click=a.noop;a.pjax.submit=a.noop;a.pjax.reload=function(){window.location.reload()};a(window).off("popstate.pjax",H)}var c=!0,K=window.location.href,B=window.history.state;B&&B.container&&(g.state=B);"state"in window.history&&(c=!1);var u={},s=[],r=[];
0>a.inArray("state",a.event.props)&&a.event.props.push("state");a.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);a.support.pjax?k():f()})(jQuery);var hljs=new function(){function a(a){return a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function y(a,d){var k=a&&a.exec(d);return k&&0==k.index}function h(a){a=(a.className+" "+(a.parentNode?a.parentNode.className:"")).split(/\s+/);a=a.map(function(a){return a.replace(/^lang(uage)?-/,"")});return a.filter(function(a){return G(a)||/no(-?)highlight/.test(a)})[0]}function v(a,d){var k={},f;for(f in a)k[f]=a[f];if(d)for(f in d)k[f]=d[f];return k}function g(a){var d=[];(function f(a,
e){for(var g=a.firstChild;g;g=g.nextSibling)3==g.nodeType?e+=g.nodeValue.length:1==g.nodeType&&(d.push({event:"start",offset:e,node:g}),e=f(g,e),g.nodeName.toLowerCase().match(/br|hr|img|input/)||d.push({event:"stop",offset:e,node:g}));return e})(a,0);return d}function A(e,d,k){function f(){return e.length&&d.length?e[0].offset!=d[0].offset?e[0].offset<d[0].offset?e:d:"start"==d[0].event?e:d:e.length?e:d}function c(b){s+="<"+b.nodeName.toLowerCase()+Array.prototype.map.call(b.attributes,function(b){return" "+
b.nodeName+'="'+a(b.value)+'"'}).join("")+">"}function g(a){s+="</"+a.nodeName.toLowerCase()+">"}function h(a){("start"==a.event?c:g)(a.node)}for(var u=0,s="",r=[];e.length||d.length;){var b=f(),s=s+a(k.substr(u,b[0].offset-u)),u=b[0].offset;if(b==e){r.reverse().forEach(g);do h(b.splice(0,1)[0]),b=f();while(b==e&&b.length&&b[0].offset==u);r.reverse().forEach(c)}else"start"==b[0].event?r.push(b[0].node):r.pop(),h(b.splice(0,1)[0])}return s+a(k.substr(u))}function D(a){function d(a){return a&&a.source||
a}function k(c,f){return RegExp(d(c),"m"+(a.cI?"i":"")+(f?"g":""))}function f(c,g){if(!c.compiled){c.compiled=!0;c.k=c.k||c.bK;if(c.k){var h={},u=function(b,c){a.cI&&(c=c.toLowerCase());c.split(" ").forEach(function(a){a=a.split("|");h[a[0]]=[b,a[1]?Number(a[1]):1]})};"string"==typeof c.k?u("keyword",c.k):Object.keys(c.k).forEach(function(a){u(a,c.k[a])});c.k=h}c.lR=k(c.l||/\b[A-Za-z0-9_]+\b/,!0);g&&(c.bK&&(c.b="\\b("+c.bK.split(" ").join("|")+")\\b"),c.b||(c.b=/\B|\b/),c.bR=k(c.b),c.e||c.eW||(c.e=
/\B|\b/),c.e&&(c.eR=k(c.e)),c.tE=d(c.e)||"",c.eW&&g.tE&&(c.tE+=(c.e?"|":"")+g.tE));c.i&&(c.iR=k(c.i));void 0===c.r&&(c.r=1);c.c||(c.c=[]);var s=[];c.c.forEach(function(a){a.v?a.v.forEach(function(c){s.push(v(a,c))}):s.push("self"==a?c:a)});c.c=s;c.c.forEach(function(a){f(a,c)});c.starts&&f(c.starts,g);var r=c.c.map(function(a){return a.bK?"\\.?("+a.b+")\\.?":a.b}).concat([c.tE,c.i]).map(d).filter(Boolean);c.t=r.length?k(r.join("|"),!0):{exec:function(a){return null}}}}f(a)}function H(e,d,g,f){function c(a,
b){if(y(a.eR,b))return a;if(a.eW)return c(a.parent,b)}function h(a,b,c,e){e='<span class="'+(e?"":C.classPrefix);return e+(a+'">')+b+(c?"":"</span>")}function B(){var c;if(void 0!==b.sL)b.sL&&!E[b.sL]?c=a(n):(c=b.sL?H(b.sL,n,!0,l):I(n),0<b.r&&(q+=c.r),"continuous"==b.subLanguageMode&&(l=c.top),c=h(c.language,c.value,!1,!0));else if(b.k){c="";var e=0;b.lR.lastIndex=0;for(var d=b.lR.exec(n);d;){c+=a(n.substr(e,d.index-e));var e=b,f=d,f=r.cI?f[0].toLowerCase():f[0];(e=e.k.hasOwnProperty(f)&&e.k[f])?
(q+=e[1],c+=h(e[0],a(d[0]))):c+=a(d[0]);e=b.lR.lastIndex;d=b.lR.exec(n)}c+=a(n.substr(e))}else c=a(n);return c}function u(c,e){var d=c.cN?h(c.cN,"",!0):"";c.rB?(m+=d,n=""):c.eB?(m+=a(e)+d,n=""):(m+=d,n=e);b=Object.create(c,{parent:{value:b}})}function s(e,d){n+=e;if(void 0===d)return m+=B(),0;var f;a:{f=b;for(var h=0;h<f.c.length;h++)if(y(f.c[h].bR,d)){f=f.c[h];break a}f=void 0}if(f)return m+=B(),u(f,d),f.rB?0:d.length;if(f=c(b,d)){h=b;h.rE||h.eE||(n+=d);m+=B();do b.cN&&(m+="</span>"),q+=b.r,b=b.parent;
while(b!=f.parent);h.eE&&(m+=a(d));n="";f.starts&&u(f.starts,"");return h.rE?0:d.length}if(!g&&y(b.iR,d))throw Error('Illegal lexeme "'+d+'" for mode "'+(b.cN||"<unnamed>")+'"');n+=d;return d.length||1}var r=G(e);if(!r)throw Error('Unknown language: "'+e+'"');D(r);var b=f||r,l,m="";for(f=b;f!=r;f=f.parent)f.cN&&(m=h(f.cN,"",!0)+m);var n="",q=0;try{for(var v,A,z=0;;){b.t.lastIndex=z;v=b.t.exec(d);if(!v)break;A=s(d.substr(z,v.index-z),v[0]);z=v.index+A}s(d.substr(z));for(f=b;f.parent;f=f.parent)f.cN&&
(m+="</span>");return{r:q,value:m,language:e,top:b}}catch(F){if(-1!=F.message.indexOf("Illegal"))return{r:0,value:a(d)};throw F;}}function I(e,d){d=d||C.languages||Object.keys(E);var g={r:0,value:a(e)},f=g;d.forEach(function(a){if(G(a)){var d=H(a,e,!1);d.language=a;d.r>f.r&&(f=d);d.r>g.r&&(f=g,g=d)}});f.language&&(g.second_best=f);return g}function F(a){C.tabReplace&&(a=a.replace(/^((<[^>]+>|\t)+)/gm,function(a,e,f,c){return e.replace(/\t/g,C.tabReplace)}));C.useBR&&(a=a.replace(/\n/g,"<br>"));return a}
function z(a){var d=h(a);if(!/no(-?)highlight/.test(d)){var k;C.useBR?(k=document.createElementNS("http://www.w3.org/1999/xhtml","div"),k.innerHTML=a.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):k=a;var f=k.textContent,c=d?H(d,f,!0):I(f);k=g(k);if(k.length){var q=document.createElementNS("http://www.w3.org/1999/xhtml","div");q.innerHTML=c.value;c.value=A(k,g(q),f)}c.value=F(c.value);a.innerHTML=c.value;a.className+=" hljs "+(!d&&c.language||"");a.result={language:c.language,re:c.r};c.second_best&&
(a.second_best={language:c.second_best.language,re:c.second_best.r})}}function q(){if(!q.called){q.called=!0;var a=document.querySelectorAll("pre code");Array.prototype.forEach.call(a,z)}}function G(a){return E[a]||E[J[a]]}var C={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},E={},J={};this.highlight=H;this.highlightAuto=I;this.fixMarkup=F;this.highlightBlock=z;this.configure=function(a){C=v(C,a)};this.initHighlighting=q;this.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",
q,!1);addEventListener("load",q,!1)};this.registerLanguage=function(a,d){var g=E[a]=d(this);g.aliases&&g.aliases.forEach(function(d){J[d]=a})};this.listLanguages=function(){return Object.keys(E)};this.getLanguage=G;this.inherit=v;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";
this.BE={b:"\\\\[\\s\\S]",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE]};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE]};this.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/};this.CLCM={cN:"comment",b:"//",e:"$",c:[this.PWM]};this.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[this.PWM]};this.HCM={cN:"comment",b:"#",e:"$",c:[this.PWM]};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM=
{cN:"number",b:this.BNR,r:0};this.CSSNM={cN:"number",b:this.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0};this.RM={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]};this.TM={cN:"title",b:this.IR,r:0};this.UTM={cN:"title",b:this.UIR,r:0}};
hljs.registerLanguage("javascript",function(a){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},
c:[{cN:"pi",b:/^\s*('|")use strict('|")/,r:10},a.ASM,a.QSM,a.CLCM,a.CBCM,a.CNM,{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBCM,a.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[a.inherit(a.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[a.CLCM,a.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+a.IR,r:0}]}});if("undefined"===!window.jQuery)throw Error("app.js requires jQuery");else{var app=function(a){function y(a){if(Storage)return JSON.parse(localStorage.getItem(a))}function h(a,b){Storage&&localStorage.setItem(a,JSON.stringify(b))}function v(){a(document).pjax("a[data-pjax]","#pjax-container");a(document).on("pjax:send",function(){});a(document).on("pjax:end",function(){0<a("#listsjs").length?A():0<a("#merger").length?D():(a(".teams").hide(),a("#sidebarTrigger").hide(),a(".navbar-fixed-top").show(),
a(".navbar-brand > .text-warning").text("kurtlocker.org"),a(".social").show())})}function g(){a("#sidebarTrigger").unbind("click").click(function(b){b.preventDefault();a("#wrapper").toggleClass("toggled")})}function A(){0<a("#listsjs").length&&(g(),a("#sidebarTrigger").show(),a(".navbar-brand > .text-warning").text("[ l [ i [ s ] t ] s ]"),a("div.js").each(function(b,t){a(t).text(a(t).text().trim());hljs.highlightBlock(t)}),a(".sidebarFunc").unbind("click").click(function(){a(".sidebarFunc").removeClass("blue-dotted");
a(this).addClass("blue-dotted");a(".nav-tabs").removeClass("blue-dotted");a("#function-"+a(this).attr("num")).addClass("blue-dotted");a("html, body").animate({scrollTop:a("#function-"+a(this).attr("num")).offset().top-60},500);a("#wrapper").hasClass("toggled")&&a("#wrapper").toggleClass("toggled")}),a("#page-content-wrapper").unbind("click").click(function(){a("#wrapper").hasClass("toggled")&&a("#wrapper").toggleClass("toggled")}))}function D(){0<a("#merger").length&&(a(".teams").show(),a(".social").hide(),
a(".navbar-fixed-top").hide(),a(".navbar-brand > .text-warning").text("thread merger"),a(".open-controls").unbind("click").click(function(){G()}),a("#delete-column").unbind("click").click(function(){p.remove(a(this).data("column"));K(a(this).data("column"));h("config",p);l();e()}),0<p.length&&(l(),e()),H(),q())}function H(){var a;Object.keys(T).length?a=T:a={subs:"nfl nba mlb nhl mls hockey".split(" "),match:["Game Thread","Match Thread","Live Thread"]};I(a);F(a.match)}function I(b){var t=b.match,
c="",d="";b.subs.forEach(function(a,b){c+=z(a,"input")});t.forEach(function(a,b){d+=z(a,"input")});a("#watch-subreddits .list-group.contain, #watch-matching .list-group.contain").children().remove();a("#watch-subreddits .list-group.contain").append(c);a("#watch-matching .list-group.contain").append(d)}function F(b){a("#watch-threads .list-group.contain").children().remove();a("#watch-subreddits input").each(function(c,d){N("/r/"+d.value,"","",{target:b,callback:function(c,t){c.data.children.forEach(function(c,
t){b.some(function(a){return RegExp(a.toLowerCase()).test(c.data.title.toLowerCase())})&&a("#watch-threads .list-group.contain").append(z(c.data.title));w(a("#watch-threads .list-group-item"),100)})}})})}function z(a,b){return"input"==b?"<li class='list-group-item'><div class='input-group'><input class='form-control' type='text' value='"+a+"'></input><span class='input-group-addon'><i class='fa fa-close'></i></span></div></li>":"<li class='list-group-item nopacity'>"+a+"</li>"}function q(){app.height=
window.innerHeight;a(".frame-content, .edit-form").css("height",window.innerHeight-107);a(window).unbind("resize").bind("resize",function(){app.height!=window.innerHeight&&(a(".frame-content, .edit-form").css("height",window.innerHeight-107),app.height=window.innerHeight)})}function G(){aa();l();C();a("#save-changes").unbind("click").bind("click",function(){J();h("config",p);e()});a("#controlModal").unbind("hide.bs.modal").on("hide.bs.modal",function(b){a("#config-rows").children().remove()});a("#controlModal").modal()}
function C(){w(a("a.white"),100);a("#reddit-logout").unbind("click").bind("click",function(){V("/reddit-logout",function(b,c,d){a(".config-account").children().remove();a(".config-account").append(b);w(a("a.white"),100)})})}function E(){a("#reddit-block, #twitter-block").unbind("click").bind("click",function(){"reddit-block"==this.id&&(P("#reddit","column-settings","sub-group-controls","subreddit-controls","thread-controls","delete-controls"),Z(),n(),a("#vendor-group, #reddit").toggleClass("hide"))})}
function J(){!a("#reddit").hasClass("hide")&&any(".thread-controls",function(b){return null!=a(b).val()})&&(m(".sub-group-controls",".subreddit-controls",".thread-controls","#reddit .column-settings"),l(),a("#cancel-column").trigger("click"))}function e(){a(".carousel-inner").children().remove();0==p.length?a("#greeting").show():a("#greeting").hide();for(var b=0,t=p.length;b<t;b++)c(p[b],b)}function d(b,c){for(var d="<div class='edit-button-group'><button type='button' class='add-thread-button btn btn-primary btn-default'>Add Thread</button><button style='float:right;' type='button' class='save-edit-button btn btn-primary btn-default'>Save</button><button style='float:right; margin-right: 5px;' type='button' class='cancel-edit-button btn btn-default'>Cancel</button></div>",
e=a("<div>").append(a("#template > option").clone()).html(),g=a("<div>").append(a(".column-settings").children().clone().each(function(){var b=a(this).find("label"),d=a(this).find("*[id]");b.attr("for",b.attr("for")+"-"+c);d.attr("id",d.attr("id")+"-"+c)})).html(),U=0,h=b.threads.length;U<h;U++)d+="<div class='subreddit-group-edit'>"+("<div class='form-group'><label class='control-label'>Subreddit</label><span style='float:right;'><i class='fa fa-close fa-lg delete-edit'></i></span><select class='form-control subreddit-edit'>"+
e+"</select></div>")+("<div class='form-group'><label class='control-label'>Threads</label><select data-column='"+c+"' class='form-control thread-edit'></select></div>")+"</div>";d+="<div class='edit-column-settings'>"+g+"</div>";a(".edit-form[data-column="+c+"]").append(d);a("#column-name-"+c).val(b.settings.name);a("#refresh-"+c).val(b.settings.refreshRate);a("#limit-"+c).val(b.settings.limitPosts);a("#sortBy-"+c).val(b.settings.sortBy);a(".edit-form[data-column="+c+"] .subreddit-edit").each(function(b,
d){this.value=p[c].threads[b].subreddit;a(this).unbind("change").bind("change",function(){var b=a(".edit-form[data-column="+c+"] .subreddit-group-edit").index(a(this).parent().parent());N(this.value,"","",{target:["edit-form .thread-edit",b,c],callback:Q})})});S("delete-edit");P(".edit-form[data-column="+c+"]","edit-button-group","subreddit-group-edit","subreddit-edit","thread-edit","delete-edit");f(b,c);k(b,c)}function k(b,t){a(".edit-form[data-column="+t+"] .save-edit-button").unbind("click").bind("click",
function(){var a=".edit-form[data-column="+t+"]";m(a+" .subreddit-group-edit",".subreddit-edit",".thread-edit",a+" .edit-column-settings",t);h("config",p);c(p[t],t);s(t)})}function f(b,t){a(".edit-form[data-column="+t+"] .cancel-edit-button").unbind("click").bind("click",function(){c(b,t);s(t)})}function c(b,c){a(".item[data-column="+c+"]").remove();var e="<div data-column='"+c+"' class='item "+(0==c?"active":"")+"'>"+("<div data-column='"+c+"' data-type='"+b.type+"' class='frame-position nopacity'>"+
("<div class='frame-container'>"+("<i data-column='"+c+"' class='nopacity loading fa fa-refresh fa-spin fa-2x'></i><div class='frame-overlay' data-column='"+c+"'><div data-column='"+c+"' class='frame'><h6 class='frame-header'>"+("reddit"==b.type?"<i class='fa fa-reddit fa-lg'></i> ":"<i class='fa fa-twitter'></i> ")+b.settings.name+("<span style='float:right;'><i data-column='"+c+"' class='fa fa-toggle-on fa-lg refreshSwitch'></i><i data-column='"+c+"' class='fa fa-edit fa-lg'></i><i data-column='"+
c+"' class='fa fa-close fa-lg'></i></span>")+"</h6>"+("<div data-column='"+c+"' class='frame-edit nopacity hide'><form data-column='"+c+"' role='form' class='edit-form'></form></div>")+"</div></div>"+("<div data-column='"+c+"' class='frame-content nopacity'></div>"))+"</div>")+"</div>")+"</div>",f=a(".carousel-inner");0==c?0<f.children().length?a(e).insertBefore(".item:first"):f.append(e):a(e).insertAfter(a(".item[data-column="+(c-1)+"]"));u(c);d(b,c);"reddit"==b.type&&(r(b,c),B(c));q();w(".frame-position[data-column="+
c+"]",100)}function K(a){clearInterval(app["r"+a]);delete app["r"+a]}function B(b){K(b);a(".refreshSwitch[data-column="+b+"]").hasClass("fa-toggle-on")?app["r"+b]=setInterval(function(){r(p[b],b)},1E3*parseInt(p[b].settings.refreshRate)):clearInterval(app["r"+b])}function u(b){a(".refreshSwitch[data-column="+b+"]").unbind("click").bind("click",function(){var b=a(this).data("column");a(this).toggleClass("fa-toggle-on fa-toggle-off");a(this).hasClass("fa-toggle-on")&&r(p[b],b);B(b)});a(".fa-edit[data-column="+
b+"]").unbind("click").bind("click",function(){var b=a(this).data("column"),c=a(".frame-edit[data-column="+b+"]"),d=a(".frame-content[data-column="+b+"]");c.hasClass("hide")?(c.removeClass("hide"),d.removeClass("faded").addClass("hide"),w(c,100),a(".edit-form[data-column="+b+"] .subreddit-group-edit").each(function(b,c){var d=a(this).find(".subreddit-edit").val(),t=a(this).find(".thread-edit").val();"default"!=d&&null==t&&a(this).find(".subreddit-edit").trigger("change")})):(c.removeClass("faded").addClass("hide"),
d.removeClass("hide"),w(d,100))});a(".fa-close[data-column="+b+"]").unbind("click").bind("click",function(){var b=a(this).data("column");a("#delete-column").data("column",b);a("#column-to-delete").text(p[b].settings.name);a("#delete-column-modal").modal()})}function s(b){a(".item").removeClass("active");a(".item[data-column="+b+"]").addClass("active")}function r(c,d){ba(d);for(var e=[],f=0,g=c.threads.length;f<g;f++)N(c.threads[f].thread,c.settings.sortBy,c.settings.limitPosts,{target:d,callback:function(c,
f){e=e.concat([c.concat(f)]);if(p[f].threads.length==e.length){var L=ca(e);0==a(".frame-content[data-column="+d+"]").children().length&&b(L[1].data.children[0].data.name,f);da(L,f);R(f)}}})}function b(a,b){"undefined"!==typeof a&&(app["firstComment"+b]=a)}function l(){if(0<p.length){a("#current-config").removeClass("hide");var b=a("#config-rows");b.children().remove();for(var c="",d=0,e=p.length;d<e;d++)c+="<div data-columnNum='"+d+"' class='col-xs-12 col-md-8 config-panel-column nopacity'>"+p[d].settings.name+
"<span class='icon-right icon-config'><i class='fa fa-edit fa-lg'></i><i class='fa fa-close fa-lg'></i></span></div>";b.append(c);w(b.children(),100);b.find(".fa-close").unbind("click").bind("click",function(){var b=a(this).parent().parent().data("columnnum");K(b);p.remove(b);h("config",p);l()})}else a("#current-config").removeClass("hide").addClass("hide")}function m(b,c,d,e,f){var g={},h={},k=[];b=a(b);e=a(e).find(".form-control");var l="undefined"!==typeof f&&"reddit"==a(".frame-position[data-column="+
f+"]").data("type")||!a("#reddit").hasClass("hide")?"reddit":"twitter";b.each(function(b,e){if(a(e).find(d).val()){var f={},g=a(e).find(d+" option:selected");f.subreddit=a(e).find(c).val();f.thread=a(e).find(d).val();f.threadid=g.data("threadid");f.threadtitle=g.data("threadtitle");f.subid=g.data("subid");k.push(f)}});0<b.length&&(g.threads=k,h.name=e[0].value,h.refreshRate=e[1].value,h.limitPosts=e[2].value,h.sortBy=e[3].value,g.settings=h,g.type=l,"undefined"!==typeof f?p[f]=g:p=p.concat(g))}function n(){a(".fa-arrow-circle-left").unbind("click").click(function(){a(this).hasClass("fa-arrow-circle-left")&&
(a(".add-thread-button").hasClass("hide")||a("#vendor-group, #reddit").toggleClass("hide"))})}function Z(){a("#cancel-column").unbind("click").bind("click",function(){a(".sub-group-controls").remove();a("#add-a-column, #reddit").toggleClass("hide");a("#helpBlock-1").hasClass("hide")&&a("#add-button, .add-thread-button, [id^=helpBlock-], .fa-arrow-circle-right, .sub-group-controls, .column-settings").toggleClass("hide")})}function P(b,c,d,e,f,g){a(b+" .add-thread-button").unbind("click").click(function(){var h=
"<div class='"+d+" nopacity'>"+("<div class='form-group'><label class='control-label'>Subreddit</label><span style='float:right;'><i class='fa fa-close fa-lg "+g+"'></i></span><select class='form-control "+e+"'></select></div>")+("<div class='form-group'><label class='control-label'>Threads</label><select class='form-control "+f+"'></select></div>")+"</div>",k=a("#template > option").clone();a(h).insertAfter(b+" ."+c);a(b+" ."+e+":first").append(k);a(b+" ."+e+":first").unbind("change").bind("change",
function(){var b=a("."+d).index(a(this).parent().parent());N(this.value,"","",{target:[f,b],callback:Q})});w("."+d,100);S(g)})}function S(b){a("."+b).unbind("click").bind("click",function(){a(this).parent().parent().parent().remove()})}function aa(){a("#add-a-column").unbind("click").bind("click",function(){a(this).removeClass("hide").addClass("hide");a("#vendor-group").removeClass("hide");E()})}function Q(b,c){var d=c[2]?a(a("."+c[0]+"[data-column="+c[2]+"]")[c[1]]):a(a("."+c[0])[c[1]]);d.children().remove();
b.data.children.forEach(function(a,b){d.append("<option data-subid='"+a.data.subreddit_id+"' data-threadtitle='"+a.data.title+"' data-threadid='"+a.data.id+"' value='"+a.data.permalink+"'>"+a.data.title+"</option>")});if(0<p.length&&"undefined"!==typeof c[2]){var e=p[c[2]].threads[c[1]];0==d.find("option[data-threadid="+e.threadid+"]").length&&e.subid==d.find("option:selected").data("subid")&&d.append("<option data-subid='"+e.subid+"' data-threadtitle='"+e.threadtitle+"' data-threadid='"+e.threadid+
"' value='"+e.thread+"'>"+e.threadtitle+"</option>");d.find("option[data-threadid="+e.threadid+"]").prop("selected",!0)}}function ba(b){a(".frame-overlay[data-column="+b+"]").addClass("half-fade");a(".loading[data-column="+b+"]").addClass("faded")}function R(b){a(".frame-overlay[data-column="+b+"]").removeClass("half-fade");a(".loading[data-column="+b+"]").removeClass("faded")}function w(b,c){setTimeout(function(){a(b).addClass("faded")},c)}function x(){a(".reply-switch").unbind("click").bind("click",
function(){var b=a(this).parent().parent().find(".reply-form");b.hasClass("hide")?(b.removeClass("hide"),b.find("form").removeClass("hide"),b.find(".submitting").removeClass("faded").addClass("hide"),w(b,100)):b.removeClass("faded").addClass("hide")});a(".save-reply").unbind("click").click(function(){function b(c,d,e){c&&c.needsLogin?a("#login-reddit-modal").modal():c.statusCode?console.log(c.statusCode):c.json&&0<c.json.errors.length?console.log(c.json.errors):(c=c.json.data.things,a(M(c,!0)).insertAfter("#"+
c[0].data.parent_id+" .comment-footer:first"),a("#"+c[0].data.parent_id+" .fa-reply:first").trigger("click"),O(),w(a("#"+c[0].data.name),100))}function c(a,b,d){console.log(b)}var d=this.form.thing_id.value,e=this.form.text.value,f=a(this.form.previousSibling);0!=e.length&&(a(this.form).addClass("hide"),w(f.removeClass("hide"),100),ea("/save-reddit-reply",{thing_id:d,text:e},b,c))});a(".cancel-reply").unbind("click").click(function(){console.log("shut it down!")})}function O(){a(".md a").each(function(b,
c){a(c).attr("target","_blank");"/u/"==a(c).attr("href").substring(0,3)||"/r/"==a(c).attr("href").substring(0,3)?a(c).attr("href","http://www.reddit.com"+a(c).attr("href")):""});x();fa();ha()}function da(c,d){var e=a(".frame-content[data-column="+d+"]");if(e.children().length){e=app["firstComment"+d];if(e!=c[1].data.children[0].data.name){var f=takeWhile(c[1].data.children,e,function(a,b){return a.data.name!=b});a(M(f,!0,!0)).insertBefore(".frame-content[data-column="+d+"] #"+e);f.forEach(function(b){w(a("#"+
b.data.name),500)});b(c[1].data.children[0].data.name,d)}W(c[1].data.children)}else e.append(M(c[1].data.children,!1,!0)),w(e,1E3);O()}function W(b){b.forEach(function(b){var c="more"!=b.kind&&b.data.replies.hasOwnProperty("data")?b.data.replies.data.children:[],d=c.length,e="#"+b.data.name+" .comment-footer[data-id="+b.data.name+"]";"undefined"!==typeof b.data.created_utc?a(e+" .time-elapsed").text(X(b.data.created_utc)):"";"undefind"!==typeof b.data.score?a(".score[data-id="+b.data.name+"]").text(b.data.score):
"";b=b.data.name;var f=a("#"+b+" .media[data-parentid="+b+"]"),g=a(e+" .reply"),h=a(e+" .reply .reply-num"),k=d-f.length,L="<a class='btn new-comment'><span class='text-primary diff'>"+k+" new</span></a>",l="<span class='reply-num text-warning'>"+d+"</span><span class='text-warning'>&nbsp;<i class='fa expand fa-plus-square'></i>&nbsp;</span>";0<d&&0<g.length?(g.data("replylength",d),h.text(d),0<k&&0==a(e+" .new-comment").length?a(L).insertAfter(e+" .reply"):(!a("footer[data-id="+b+"] .reply").children().length&&
0<f.length&&(a("footer[data-id="+b+"] .reply").append(l),a("footer[data-id="+b+"] .reply .expand").toggleClass("fa-plus-square fa-minus-square")),a(e+" .new-comment .diff").text(k+" new")),Y(e+" .new-comment")):0<d&&(a("<a data-name='"+b+"' data-replylength='"+d+"' class='btn reply'></a>").insertAfter(e+" .refresh-comment"),0<k&&(a(L).insertAfter(e+" .reply"),Y(e+" .new-comment")),f.hasClass("faded")&&(a("footer[data-id="+b+"] .reply").append(l),a("footer[data-id="+b+"] .reply .expand").toggleClass("fa-plus-square fa-minus-square")));
W(c)})}function Y(b){a(b).unbind("click").bind("click",function(){a(this).parent().parent().find(".refresh-comment").trigger("click")})}function M(b,c,d,e){b=b||[];var f="";b.forEach(function(b,g){var h="more"!=b.kind&&b.data.replies.hasOwnProperty("data")?b.data.replies.data.children:[],k=h.length,k="more"!=b.kind?"<footer data-id='"+b.data.name+"' class='comment-footer'><div class='links-container btn-group'><a class='btn time-elapsed white'>"+X(b.data.created_utc)+"</a><a class='btn reply-switch'><i class='fa fa-reply fa-lg'></i></a><a class='btn perma' href='"+
("http://www.reddit.com/comments/"+b.data.link_id.substr(3)+"/_/"+b.data.id)+"' target='_blank'><i class='fa fa-link fa-lg'></i></a><a class='btn refresh-comment' data-linkid='"+b.data.link_id+"' data-id='"+b.data.id+"'><i class='fa fa-refresh fa-lg'></i></a>"+(0!=k?"<a data-name='"+b.data.name+"' data-replylength='"+k+"' class='btn reply'><span class='reply-num text-warning'>"+k+"</span><span class='text-warning'>&nbsp;<i class='fa expand fa-plus-square'></i>&nbsp;</span></a>":"")+"</div>"+("<div class='nopacity hide reply-form'><div class='submitting nopacity hide'>Submitting...</div><form action='javascript:void(0)'>"+
("<input type='hidden' name='thing_id' value='"+b.data.name+"''>")+("<textarea name='text' class='form-control' placeholder='Reply to "+b.data.author+"..'></textarea>")+"<div class='reply-buttons'><button class='cancel-reply btn btn-default'>Cancel</button><button type='submit' class='save-reply btn btn-primary'>Save</button></div></form></div>")+"</footer>":"",h=a("<div/>").html(b.data.body_html).text()+k+M(h,!0,!1,!0);body="<div class='media-body'>"+("more"!=b.kind?"<div class='media-heading btn-group'><a class='btn vote'><i class='fa fa-arrow-up'></i></a><a data-id='"+
b.data.name+"' class='score btn'>"+b.data.score+"</a><a class='btn vote vote-last'><i class='fa fa-arrow-down'></i></a><a class='btn author' href='http://www.reddit.com/u/"+b.data.author+"' target='_blank'>"+b.data.author+"</a>"+(b.data.author_flair_css_class?"<a class='flair btn'>"+b.data.author_flair_css_class+"</a>":"&nbsp;")+"</div>"+h:"<div class='load-comments' data-parent='"+b.data.parent_id+"' class='load-comments'><i class='fa fa-download'></i>&nbsp; load more comments</div>"+h)+"</div>";
thumbnail="more"!=b.kind?"<div class='thumb pull-left "+(d?"icon-"+b.data.subreddit:"")+"'></div>":"";media="<div data-parentid='"+b.data.parent_id+"' data-linkid='"+b.data.link_id+"' data-icon='"+("icon-"+b.data.subreddit)+"' id='"+b.data.name+"' class='media"+(d?" parent ":e?" hide":"")+""+(c?" nopacity":"")+"'>"+thumbnail+body+"</div>";f+=media});return f}function ha(){a(".reply").unbind("click").click("click",function(){var b=a(this).data("name"),b=a("#"+b+" .media[data-parentid="+b+"]"),c=a(this).find(".expand");
c.hasClass("fa-plus-square")?(c.removeClass("fa-plus-square").addClass("fa-minus-square"),w(b.removeClass("hide"),100)):(c.removeClass("fa-minus-square").addClass("fa-plus-square"),b.removeClass("faded").addClass("hide"))})}function fa(){a(".refresh-comment, .load-comments").unbind("click").bind("click",function(){var b=a(this).data("linkid"),c=a(this).data("id")?a(this).data("id"):a("#"+a(this).data("parent")).attr("id").substr(3),d=a("#t1_"+c).hasClass("parent");ia(b?b:a("#"+a(this).data("parent")).data("linkid"),
c,function(b){b=M(b[1].data.children);a("#t1_"+c).replaceWith(b);d&&(a("#t1_"+c).addClass("parent"),a("#t1_"+c).children(":first").addClass(a("#t1_"+c).data("icon")));a("footer[data-id=t1_"+c+"] .reply .expand").toggleClass("fa-plus-square fa-minus-square");a("#t1_"+c+" .media[data-parentid="+a("#t1_"+c).attr("id")+"]").removeClass("hide").addClass("faded");a("#t1_"+c).addClass("nopacity");w(a("#t1_"+c),100);O()})})}function ia(a,b,c,d){V("http://www.reddit.com/comments/"+a.substr(3)+"/_/"+b+".json?sort=new",
c,d)}function X(a){if(a){var b=new Date(1E3*a),c=(new Date).getTime(),d=c-b.getTime(),e=Math.floor(d/864E5),d=d-864E5*e,f=Math.floor(d/36E5),d=d-36E5*f,g=Math.floor(d/6E4),d=Math.floor((d-6E4*g)/1E3);return 0!=!e||0>=e?0==e&&0==!f?f+"h":0==e&&0==f&&0==!g?g+"m":0==e&&0==f&&0==g&&0==!d?d+"s":1E3>c-1E3*a?"1s":b.toLocaleTimeString():e+"d"}}function ca(a){var b=[];a.forEach(function(a,c){0<a.length&&(b=b.concat(a[1].data.children))});b=b.filter(function(a){if("more"!=a.kind)return a}).sort(ja);a[0][1].data.children=
b;return a[0]}function ja(a,b){return"more"!=a.kind&&"more"==b.kind?1:"more"==a.kind&&"more"!=b.kind?-1:a.data.created_utc<b.data.created_utc?1:a.data.created_utc>b.data.created_utc?-1:0}function V(b,c,d,e){a.ajax({url:b,type:"GET",timeout:7E3,cache:!1}).done(function(a,b,d){c&&c(a,b,d)}).fail(function(a,b,c){d&&d(a,b,c)}).always(function(){e&&e()})}function ea(b,c,d,e,f){a.ajax({url:b,type:"POST",timeout:7E3,data:c,cache:!1}).done(function(a,b,c){d&&d(a,b,c)}).fail(function(a,b,c){e&&e(a,b,c)}).always(function(){f&&
f()})}function N(b,c,d,e){a.ajax({url:"http://www.reddit.com"+b+"/.json?sort="+c+"&limit="+d+"&jsonp=?",dataType:"json",timeout:7E3,cache:!1}).done(function(a,b,c){e.callback(a,e.target)}).fail(function(a,c,d){"timeout"==d?console.log(c):console.log(d+": error retrieving - "+b);R(e.target)}).always(function(){e.always&&e.always(e.target)})}var p=localStorage.getItem("config")?y("config"):[],T=localStorage.getItem("watch")?y("watch"):{};return{init:function(){v();A();D()}}}(jQuery);$(document).ready(function(){app.init()})}
Array.prototype.remove=function(a,y){var h=this.slice((y||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,h)};function takeWhile(a,y,h){for(var v=[],g=0,A=a.length;g<A;g++)if(h(a[g],y))v.push(a[g]);else break;return v}function any(a,y){var h=!1;$(a).each(function(a,g){y(g)&&(h=!0)});return h};(function(a,y,h,v,g,A,D){a.GoogleAnalyticsObject=g;a[g]=a[g]||function(){(a[g].q=a[g].q||[]).push(arguments)};a[g].l=1*new Date;A=y.createElement(h);D=y.getElementsByTagName(h)[0];A.async=1;A.src=v;D.parentNode.insertBefore(A,D)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-57745225-1","auto");ga("send","pageview");
